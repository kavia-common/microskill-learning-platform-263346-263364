{"is_source_file": true, "format": "JavaScript", "description": "Main server source code for the MicroSkill API, setting up Express server, routes, middleware, and in-memory data stores.", "external_files": ["express", "helmet", "morgan", "express-rate-limit", "cors", "dotenv", "express-validator", "nanoid"], "external_methods": ["loadEnv", "validationResult"], "published": ["app"], "classes": [], "methods": [{"name": "getUserId", "description": "Retrieves user ID from request headers or defaults to 'anon'."}, {"name": "getProgressStore", "description": "Retrieves or initializes progress store for a user and skill."}, {"name": "calculateStats", "description": "Calculates progress statistics for a given skill and items."}, {"name": "validateRequest", "description": "Validates incoming request using express-validator results."}, {"name": "sanitizeValidationError", "description": "Sanitizes validation error objects for logging or response."}, {"name": "scrub", "description": "Limits string length to prevent large PII in logs."}, {"name": "errorPayload", "description": "Constructs standardized error response payload."}, {"name": "seedSkills", "description": "Creates initial in-memory skill data with lessons."}], "calls": ["loadEnv", "validationResult", "app.use", "app.get", "app.post", "app.listen", "helmet", "cors", "morgan", "express.json", "rateLimit", "getUserId", "getProgressStore", "calculateStats", "validateRequest", "errorPayload"], "search-terms": ["Express server setup", "In-memory skill data", "Progress tracking API", "MicroSkill backend", "Route handlers"], "state": 2, "file_id": 62, "knowledge_revision": 334, "git_revision": "79926bec57bf34a077a287485d2a79a0dad135f5", "revision_history": [{"214": ""}, {"334": "79926bec57bf34a077a287485d2a79a0dad135f5"}], "ctags": [], "filename": "backend/src/index.js", "format-version": 4, "code-base-name": "https://github.com/kavia-common/microskill-learning-platform-263346-263364.git:kavia-main"}