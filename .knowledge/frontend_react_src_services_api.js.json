{"is_source_file": true, "format": "JavaScript", "description": "This file defines an API client for a Learning Management System (LMS) backend. It includes functions for fetching lessons, lesson details, quizzes, user progress, and generating lessons or media via API endpoints. It handles environment-based URL construction and robust JSON fetching with error handling.", "external_files": [], "external_methods": ["fetch", "JSON.stringify"], "published": ["getLessons", "getLesson", "getQuiz", "submitQuiz", "getProgress", "updateProgress", "generateLessonAI", "generateMediaAI", "__buildApiUrl", "__apiBase"], "classes": [], "methods": [{"name": "buildUrl(path)", "description": "Constructs an API URL based on environment variables and fallback logic.", "scope": "", "scopeKind": ""}, {"name": "responseToError(res)", "description": "Converts a fetch Response with a non-OK status into an Error object with detailed info.", "scope": "", "scopeKind": ""}, {"name": "fetchJson(url, options = {}, onErrorToast)", "description": "Performs a fetch request and returns JSON, with error handling and optional toast callback.", "scope": "", "scopeKind": ""}, {"name": "getLessons(onErrorToast)", "description": "Fetches all lessons from the backend.", "scope": "", "scopeKind": ""}, {"name": "getLesson(id, onErrorToast)", "description": "Fetches details of a specific lesson by ID.", "scope": "", "scopeKind": ""}, {"name": "getQuiz(lessonId, onErrorToast)", "description": "Fetches quiz data for a specific lesson.", "scope": "", "scopeKind": ""}, {"name": "submitQuiz(lessonId, userId, answers, onErrorToast)", "description": "Submits quiz answers for a specific lesson and user.", "scope": "", "scopeKind": ""}, {"name": "getProgress(userId, onErrorToast)", "description": "Fetches the progress of a user.", "scope": "", "scopeKind": ""}, {"name": "updateProgress(payload, onErrorToast)", "description": "Updates user progress record.", "scope": "", "scopeKind": ""}, {"name": "generateLessonAI({ topic, audience, tone, dryRun = false }, onErrorToast)", "description": "Calls backend API to generate a lesson and quiz based on specified parameters.", "scope": "", "scopeKind": ""}, {"name": "generateMediaAI({ title, summary, takeaways }, onErrorToast)", "description": "Calls backend API to generate media content (video and captions).", "scope": "", "scopeKind": ""}, {"name": "safeJson(res)", "description": "Safely parses JSON response, returning null on failure.", "scope": "", "scopeKind": ""}], "calls": ["fetch", "buildUrl", "responseToError", "safeJson"], "search-terms": ["API client", "lessons", "quiz", "progress", "generate-lesson", "generate-media", "backend API", "fetch", "React environment"], "state": 2, "file_id": 13, "knowledge_revision": 180, "git_revision": "b9ef4e31c0ab40d799a302b2486db1c5a62c1241", "revision_history": [{"28": ""}, {"158": "179f4fab9fe8c90c023745d1da03e50d50011cd6"}, {"159": "af4393856384f9763b6534a31d1e409b21be87ac"}, {"160": "af4393856384f9763b6534a31d1e409b21be87ac"}, {"166": "fc5b9a52b440ede37216550beb863f20c32970ea"}, {"167": "fc5b9a52b440ede37216550beb863f20c32970ea"}, {"175": "fc5b9a52b440ede37216550beb863f20c32970ea"}, {"180": "b9ef4e31c0ab40d799a302b2486db1c5a62c1241"}], "ctags": [{"_type": "tag", "name": "buildUrl", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/services/api.js", "pattern": "/^function buildUrl(path) {$/", "language": "JavaScript", "kind": "function", "signature": "(path)"}, {"_type": "tag", "name": "fetchJson", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/services/api.js", "pattern": "/^async function fetchJson(url, options = {}, onErrorToast) {$/", "language": "JavaScript", "kind": "function", "signature": "(url, options = {}, onErrorToast)"}, {"_type": "tag", "name": "generateLessonAI", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/services/api.js", "pattern": "/^export async function generateLessonAI({ topic, audience, tone, dryRun = false }, onErrorToast) /", "language": "JavaScript", "kind": "function", "signature": "({ topic, audience, tone, dryRun = false }, onErrorToast)"}, {"_type": "tag", "name": "generateMediaAI", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/services/api.js", "pattern": "/^export async function generateMediaAI({ title, summary, takeaways }, onErrorToast) {$/", "language": "JavaScript", "kind": "function", "signature": "({ title, summary, takeaways }, onErrorToast)"}, {"_type": "tag", "name": "getLesson", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/services/api.js", "pattern": "/^export async function getLesson(id, onErrorToast) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, onErrorToast)"}, {"_type": "tag", "name": "getLessons", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/services/api.js", "pattern": "/^export async function getLessons(onErrorToast) {$/", "language": "JavaScript", "kind": "function", "signature": "(onErrorToast)"}, {"_type": "tag", "name": "getProgress", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/services/api.js", "pattern": "/^export async function getProgress(userId, onErrorToast) {$/", "language": "JavaScript", "kind": "function", "signature": "(userId, onErrorToast)"}, {"_type": "tag", "name": "getQuiz", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/services/api.js", "pattern": "/^export async function getQuiz(lessonId, onErrorToast) {$/", "language": "JavaScript", "kind": "function", "signature": "(lessonId, onErrorToast)"}, {"_type": "tag", "name": "inferredBase", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/services/api.js", "pattern": "/^const inferredBase = (() => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "responseToError", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/services/api.js", "pattern": "/^async function responseToError(res) {$/", "language": "JavaScript", "kind": "function", "signature": "(res)"}, {"_type": "tag", "name": "safeJson", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/services/api.js", "pattern": "/^async function safeJson(res) {$/", "language": "JavaScript", "kind": "function", "signature": "(res)"}, {"_type": "tag", "name": "submitQuiz", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/services/api.js", "pattern": "/^export async function submitQuiz(lessonId, userId, answers, onErrorToast) {$/", "language": "JavaScript", "kind": "function", "signature": "(lessonId, userId, answers, onErrorToast)"}, {"_type": "tag", "name": "updateProgress", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/services/api.js", "pattern": "/^export async function updateProgress(payload, onErrorToast) {$/", "language": "JavaScript", "kind": "function", "signature": "(payload, onErrorToast)"}], "hash": "cb30b2afb777f8b92c9e8140fde44fcf", "format-version": 4, "code-base-name": "frontend_react", "filename": "frontend_react/src/services/api.js"}