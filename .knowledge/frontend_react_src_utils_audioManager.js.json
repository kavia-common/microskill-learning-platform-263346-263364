{"is_source_file": true, "format": "JavaScript", "description": "This file defines a GlobalAudioManager class that manages multiple audio elements to ensure only one plays at a time. It includes functions for registering and unregistering audio elements, controlling playback, and resolving audio assets for lessons. It also exports a singleton manager instance and a convenience play/pause function.", "external_files": ["./audioMapping"], "external_methods": ["mapLessonToAudio"], "published": ["globalAudioManager", "enforceSinglePlayback"], "classes": [{"name": "GlobalAudioManager", "description": "Manages registration, playback control, and asset resolution for multiple <audio> elements, ensuring only one plays at a time. Implements caching and inflight request management for lesson audio assets."}], "methods": [{"name": "register(audioEl, playNow = false)", "description": "Registers an audio element to be managed; optionally plays it immediately, pausing others.", "scope": "GlobalAudioManager", "scopeKind": "class"}, {"name": "unregister(audioEl)", "description": "Removes an audio element from management.", "scope": "GlobalAudioManager", "scopeKind": "class"}, {"name": "pauseAll()", "description": "Pauses all registered audio elements.", "scope": "GlobalAudioManager", "scopeKind": "class"}, {"name": "pauseAllExcept(audioEl)", "description": "Pauses all audio elements except the specified one.", "scope": "GlobalAudioManager", "scopeKind": "class"}, {"name": "_onPlay", "description": "Internal handler to pause other audios when one starts playing."}, {"name": "_onEnd", "description": "Internal handler to reset current reference when an audio ends."}, {"name": "resolveForLesson(lesson)", "description": "Resolves and caches URLs for audio assets for a given lesson object, using lesson.id as key.", "scope": "GlobalAudioManager", "scopeKind": "class"}, {"name": "constructor()", "scope": "GlobalAudioManager", "scopeKind": "class", "description": "unavailable"}, {"name": "enforceSinglePlayback(audioEl, shouldPlay)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "log(level, msg, meta)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["mapLessonToAudio", "audioEl.play()"], "search-terms": ["GlobalAudioManager", "audio element management", "lesson audio asset resolution", "single audio playback control", "resolveForLesson", "audio caching"], "state": 2, "file_id": 46, "knowledge_revision": 139, "git_revision": "8c0572af909687e772ee9dfecdccc679e63e7ffb", "revision_history": [{"105": ""}, {"127": "bdb8a517762149f72ddb6d5ffceca389707f4db1"}, {"137": "8c0572af909687e772ee9dfecdccc679e63e7ffb"}, {"139": "8c0572af909687e772ee9dfecdccc679e63e7ffb"}], "ctags": [{"_type": "tag", "name": "DIAGNOSTIC", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^ const DIAGNOSTIC = (process.env.REACT_APP_AUDIO_DIAGNOSTIC || '').toString().toLowerCase() === /", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "GlobalAudioManager", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^ class GlobalAudioManager {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "LOG_LEVEL", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^ const LOG_LEVEL = (process.env.REACT_APP_LOG_LEVEL || 'info').toLowerCase();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "LOG_LEVEL_ORDER", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^ const LOG_LEVEL_ORDER = { debug: 10, info: 20, warn: 30, error: 40 };$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "_onEnd", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^   _onEnd = (e) => {$/", "language": "JavaScript", "kind": "field", "scope": "GlobalAudioManager", "scopeKind": "class"}, {"_type": "tag", "name": "_onPlay", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^   _onPlay = (e) => {$/", "language": "JavaScript", "kind": "field", "scope": "GlobalAudioManager", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^   constructor() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "GlobalAudioManager", "scopeKind": "class"}, {"_type": "tag", "name": "debug", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^ const LOG_LEVEL_ORDER = { debug: 10, info: 20, warn: 30, error: 40 };$/", "language": "JavaScript", "kind": "property", "scope": "LOG_LEVEL_ORDER", "scopeKind": "class"}, {"_type": "tag", "name": "el", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^     const el = e.target;$/", "language": "JavaScript", "kind": "constant", "scope": "GlobalAudioManager", "scopeKind": "class"}, {"_type": "tag", "name": "enforceSinglePlayback", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^ export function enforceSinglePlayback(audioEl, shouldPlay) {$/", "language": "JavaScript", "kind": "function", "signature": "(audioEl, shouldPlay)"}, {"_type": "tag", "name": "error", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^ const LOG_LEVEL_ORDER = { debug: 10, info: 20, warn: 30, error: 40 };$/", "language": "JavaScript", "kind": "property", "scope": "LOG_LEVEL_ORDER", "scopeKind": "class"}, {"_type": "tag", "name": "globalAudioManager", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^ export const globalAudioManager = new GlobalAudioManager();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "info", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^ const LOG_LEVEL_ORDER = { debug: 10, info: 20, warn: 30, error: 40 };$/", "language": "JavaScript", "kind": "property", "scope": "LOG_LEVEL_ORDER", "scopeKind": "class"}, {"_type": "tag", "name": "log", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^ function log(level, msg, meta) {$/", "language": "JavaScript", "kind": "function", "signature": "(level, msg, meta)"}, {"_type": "tag", "name": "pauseAll", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^   pauseAll() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "GlobalAudioManager", "scopeKind": "class"}, {"_type": "tag", "name": "pauseAllExcept", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^   pauseAllExcept(audioEl) {$/", "language": "JavaScript", "kind": "method", "signature": "(audioEl)", "scope": "GlobalAudioManager", "scopeKind": "class"}, {"_type": "tag", "name": "register", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^   register(audioEl, playNow = false) {$/", "language": "JavaScript", "kind": "method", "signature": "(audioEl, playNow = false)", "scope": "GlobalAudioManager", "scopeKind": "class"}, {"_type": "tag", "name": "resolveForLesson", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^   async resolveForLesson(lesson) {$/", "language": "JavaScript", "kind": "method", "signature": "(lesson)", "scope": "GlobalAudioManager", "scopeKind": "class"}, {"_type": "tag", "name": "unregister", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^   unregister(audioEl) {$/", "language": "JavaScript", "kind": "method", "signature": "(audioEl)", "scope": "GlobalAudioManager", "scopeKind": "class"}, {"_type": "tag", "name": "warn", "path": "/home/kavia/workspace/code-generation/microskill-learning-platform-263346-263364/frontend_react/src/utils/audioManager.js", "pattern": "/^ const LOG_LEVEL_ORDER = { debug: 10, info: 20, warn: 30, error: 40 };$/", "language": "JavaScript", "kind": "property", "scope": "LOG_LEVEL_ORDER", "scopeKind": "class"}], "hash": "0e9aae449fe9be421867b00095aebdee", "format-version": 4, "code-base-name": "frontend_react", "filename": "frontend_react/src/utils/audioManager.js", "fields": [{"name": "_onEnd = (e) => {", "scope": "GlobalAudioManager", "scopeKind": "class", "description": "unavailable"}, {"name": "_onPlay = (e) => {", "scope": "GlobalAudioManager", "scopeKind": "class", "description": "unavailable"}, {"name": "const LOG_LEVEL_ORDER = { debug: 10, info: 20, warn: 30, error: 40 };", "scope": "LOG_LEVEL_ORDER", "scopeKind": "class", "description": "unavailable"}]}